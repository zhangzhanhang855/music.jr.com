<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>æ–—åœ°ä¸»è±ªåäººæœºå¯¹æˆ˜</title>
<style>
body{background:linear-gradient(#0a3d2e,#021);color:#fff;font-family:Arial;text-align:center}
.table{max-width:900px;margin:auto;padding:20px}
.card{display:inline-block;padding:8px 12px;margin:4px;border-radius:8px;border:1px solid #fff;background:#1e8449;cursor:pointer;transition:.2s}
.card:hover{transform:translateY(-4px)}
.selected{background:#ffd966;color:#000}
.panel{background:rgba(0,0,0,.4);padding:15px;border-radius:16px;margin:10px}
button{padding:10px 18px;border:none;border-radius:10px;background:#f1c40f;font-weight:bold;cursor:pointer}
button:hover{opacity:.85}
</style>
</head>
<body>
<div class="table">
<h1>ğŸƒ æ–—åœ°ä¸»è±ªåç‰ˆ</h1>
<h2>é‡‘å¸ï¼š<span id="coins">1000</span></h2>

<div class="panel">
<h3>ä½ çš„æ‰‹ç‰Œ</h3>
<div id="player"></div>
</div>

<div class="panel">
<button onclick="autoSort()">è‡ªåŠ¨ç†ç‰Œ</button>
<button onclick="playCard()">å‡ºç‰Œ</button>
<button onclick="passTurn()">ä¸è¦</button>
<button onclick="startGame()">æ–°ä¸€å±€</button>
</div>

<div class="panel">
<h3>ç”µè„‘Aå‰©ä½™ï¼š<span id="ai1">17</span> å¼  | ç”µè„‘Bå‰©ä½™ï¼š<span id="ai2">17</span> å¼ </h3>
<h3>å½“å‰ç‰Œï¼š<span id="current">æ— </span></h3>
</div>
</div>

<script>
const ranks=['3','4','5','6','7','8','9','10','J','Q','K','A','2','å°ç‹','å¤§ç‹'];
let deck=[],playerHand=[],ai1Hand=[],ai2Hand=[];
let currentCard=null,selectedIndex=null,coins=1000;

function buildDeck(){deck=[];for(let i=0;i<13;i++)for(let j=0;j<4;j++)deck.push(ranks[i]);deck.push('å°ç‹','å¤§ç‹');}
function shuffle(){for(let i=deck.length-1;i>0;i--){let r=Math.floor(Math.random()*(i+1));[deck[i],deck[r]]=[deck[r],deck[i]];}}

function startGame(){buildDeck();shuffle();playerHand=deck.slice(0,17);ai1Hand=deck.slice(17,34);ai2Hand=deck.slice(34,51);currentCard=null;autoSort();render();}

function rankValue(c){return ranks.indexOf(c)}

function autoSort(){playerHand.sort((a,b)=>rankValue(a)-rankValue(b));render();}

function render(){const p=document.getElementById('player');p.innerHTML='';playerHand.forEach((c,i)=>{const d=document.createElement('div');d.className='card'+(selectedIndex===i?' selected':'');d.innerText=c;d.onclick=()=>{selectedIndex=i;render();};p.appendChild(d);});
 document.getElementById('ai1').innerText=ai1Hand.length;
 document.getElementById('ai2').innerText=ai2Hand.length;
 document.getElementById('current').innerText=currentCard||'æ— ';
 document.getElementById('coins').innerText=coins;}

function playCard(){if(selectedIndex===null)return;const card=playerHand[selectedIndex];if(currentCard&&rankValue(card)<=rankValue(currentCard)){alert('å¿…é¡»æ›´å¤§ï¼');return;}currentCard=card;playerHand.splice(selectedIndex,1);selectedIndex=null;aiTurn(ai1Hand);aiTurn(ai2Hand);checkWin();render();}

function aiTurn(hand){let playable=hand.filter(c=>!currentCard||rankValue(c)>rankValue(currentCard));if(playable.length===0)return;playable.sort((a,b)=>rankValue(a)-rankValue(b));currentCard=playable[0];hand.splice(hand.indexOf(currentCard),1);}

function passTurn(){currentCard=null;}

function checkWin(){if(playerHand.length===0){coins+=100;alert('ğŸ‰ ä½ èµ¢äº†ï¼+100é‡‘å¸');startGame();}
 if(ai1Hand.length===0||ai2Hand.length===0){coins-=50;alert('ğŸ˜µ ç”µè„‘èµ¢äº†ï¼-50é‡‘å¸');startGame();}}

startGame();
</script>
</body>
</html>
